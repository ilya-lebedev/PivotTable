# Сводная таблица (Pivot table) для датасета "Налоги РФ"

### Описание

API для отображения датасета в виде двухмерной 
[сводной таблицы](https://en.wikipedia.org/wiki/Pivot_table).

Реализовано с использованием **Java SE 11**, **Spring Boot**, **MyBatis**, **SQLite**.

Сборка и запуск проекта **Maven**.

Реализовано в соответствии с заданием [README_TASK](README_TASK.md)

### Результаты

* Работа с кодом Java SE, Spring Boot
* Работа с БД, понимание SQL
* Понимание принципов плоского и многомерного представления данных.
* Проектирование и реализация API.
* Работа с HTTP API, JSON.
* Инструменты для CI/CD
* Документирование

### Описание БД

Файл БД `data.sqlite` содержит единственную таблицу `source_data` (датасет) с 10К записей по налогам РФ 
за 2010-2015 годы.

### Описание колонок таблицы source_data

* a - группа налога 
* b - подгруппа налога
* c - округ РФ
* d - регион РФ 
* y - год
* v - значение

## Серверная часть

Принимает запросы клиента по HTTP API, выполняет запросы в БД и отдает результат в виде JSON.

Вызов API GET принимает два параметра 

* row - название столбца БД для группировки таблицы по горизонтали
* col - название столбца БД для группировки таблицы по вертикали

Каждый параметр может принимать значения a,b,c,d,y. В случае отсутствия хотя бы одного из параметров, 
либо неверного значения хотя бы одного из параметров сервер возвращает `HTTP ERROR 400`.

Пример запроса:

```
http://localhost:8080/row=b&col=d
```

В результате запроса в БД *sqlite* возвращается массив JSON, где каждый элемент - результат агрегации по указанным 
столбцам таблицы.

Пример ответа:

```
[
    {"row" : "Транспортный налог", "col" : "Краснодарский край", "val" : 1},
    {"row" : "Транспортный налог", "col" : "Ростовская область", "val" : 2},
    {"row" : "Земельный налог", "col" : "Краснодарский край", "val" : 3},
    {"row" : "Земельный налог", "col" : "Ростовская область", "val" : 4}
]
```
 
## Запуск приложения

Для сборки и запуска приложения необходимо выполнить следующие команды:

```
$ mvn clean package
```

```
$ java -jar target/pivot-table-0.0.1-SNAPSHOT.jar
```
